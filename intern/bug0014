$State: Closed$
$BugAuthor: mr$

X-From-Line: lindow@informatik.uni-bremen.de Thu Jun  7 14:09:58 2001
Received: from dublin.informatik.uni-bremen.de (IDENT:root@dublin.informatik.uni-bremen.de [134.102.205.5])
	by nmh.informatik.uni-bremen.de (8.10.1/8.10.1) with ESMTP id f57C9v212470;
	Thu, 7 Jun 2001 14:09:57 +0200 (MEST)
Received: (from lindow@localhost)
	by dublin.informatik.uni-bremen.de (8.9.3/8.8.7) id OAA05481;
	Thu, 7 Jun 2001 14:10:00 +0200
Date: Thu, 7 Jun 2001 14:10:00 +0200
X-Gnus-Mail-Source: file:/var/mail/mr
Message-Id: <200106071210.OAA05481@dublin.informatik.uni-bremen.de>
X-Authentication-Warning: dublin.informatik.uni-bremen.de: lindow set sender to lindow@informatik.uni-bremen.de using -f
From: Arne Lindow <lindow@Informatik.Uni-Bremen.DE>
To: mr@informatik.uni-bremen.de
Subject: Excetpion in USE
X-Content-Length: 2268
Lines: 78
Xref: dustbin.informatik.uni-bremen.de mail.misc:4319

Sehr geehrter Herr     M. Richters,

hier der Kontext, in dem die Exception auftritt.

use> open test.use
use> info model
model AB


class A
operations
  op(p : Integer)
end

class B
attributes
  c : Integer
end

class Person
attributes
  name : String
  secNumber : Integer
end

association R between
  A[*] role a
  B[1] role b
end

constraints
context Person inv unique:
  Person.allInstances->forAll(p : Person | ((p <> self) implies (p.secNumber <> self.secNumber)))

context A::op(p : Integer)
  post p1: (self.b.c = 0)

context A::op(p : Integer)
  post p2: (self.b@pre.c = p)

context A::op(p : Integer)
  post p3: (self.b@pre.c@pre = 1)

context A::op(p : Integer)
  post p4: (self.b.c@pre = oclUndefined(Integer))

context A::op(p : Integer)
  pre pre3: (self.b.c = 1)

0 objects total in current state.
use> read t.cmd
t.cmd> !create a:Person
t.cmd> !create b:Person
t.cmd> !set a.secNumber=2
t.cmd> !set b.secNumber=5
t.cmd>
use> ? Person.allInstances->sortedBy(secNumber)

INTERNAL ERROR: An unexpected exception occured. This happened most probably
due to an error in the program. The program will try to continue, but may
not be able to recover from the error. Please send a bug report to mr@tzi.org
with a description of your last input and include the following output:
Program version: 2.0.0-generator_1.01
Project version: use 0.207 Mon, 19 Mar 2001 16:30:41 +0100 mr
Stack trace: java.lang.IllegalArgumentException: type mismatch
        at org.tzi.use.uml.ocl.value.SequenceValue.add(SequenceValue.java:103)
        at org.tzi.use.uml.ocl.value.SequenceValue.<init>(SequenceValue.java:74)
        at org.tzi.use.uml.ocl.expr.ExpQuery.evalSortedBy(ExpQuery.java:403)
        at org.tzi.use.uml.ocl.expr.ExpSortedBy.eval(ExpSortedBy.java:72)
        at org.tzi.use.uml.ocl.expr.Evaluator.evaluate(Evaluator.java:111)
        at org.tzi.use.uml.ocl.expr.Evaluator.eval(Evaluator.java:69)
        at org.tzi.use.uml.ocl.expr.Evaluator.eval(Evaluator.java:80)
        at org.tzi.use.main.Shell.cmdQuery(Shell.java:775)
        at org.tzi.use.main.Shell.processLine(Shell.java:266)
        at org.tzi.use.main.Shell.processLineSafely(Shell.java:221)
        at org.tzi.use.main.Shell.run(Shell.java:180)
        at java.lang.Thread.run(Thread.java:484)


